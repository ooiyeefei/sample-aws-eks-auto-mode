<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAR GPT</title>
    
    <!-- Custom GAR GPT Branding Scripts and Styles -->
    <script>
        // Function to update the title if it includes "Open WebUI"
        const monitorTitleChange = () => {
            // Select the <head> element, which contains the <title>
            const targetNode = document.head;

            // Create a MutationObserver to monitor changes
            const observer = new MutationObserver(() => {
                // Replace "Open WebUI" with "GAR GPT" in the document title
                if (document.title.includes("Open WebUI")) {
                    document.title = document.title.replace("Open WebUI", "GAR GPT");
                    console.log("Title updated to 'GAR GPT'.");
                }
            });

            // Observe the <head> for changes in child elements
            observer.observe(targetNode, {
                childList: true,
                subtree: true
            });
        };

        // Function to detect the new div and replace its class
        const monitorNewDiv = () => {
            console.log("Starting to monitor for new <div>...");

            const processDiv = () => {
                // Query the DOM for the specific <div> with required classes
                const newDiv = document.querySelector("div.w-full.h-screen");

                if (newDiv) {
                    console.log("Target <div> found!");

                    // Locate the child element with the target class
                    const targetElement = newDiv.querySelector(".text-2xl.font-medium");
                    if (targetElement) {
                        console.log("Found target element with 'text-2xl font-medium' class.");

                        // Replace the text content only if it contains "Open WebUI"
                        if (targetElement.textContent.includes("Open WebUI")) {
                            console.log("Replacing text 'Open WebUI' with 'GAR GPT'...");
                            targetElement.textContent = targetElement.textContent.replace("Open WebUI", "GAR GPT");
                        } else {
                            console.log("Target element doesn't contain 'Open WebUI'.");
                        }
                    } else {
                        console.log("No element with class 'text-2xl font-medium' found inside the target <div>.");
                    }
                } else {
                    console.log("Target <div> not found.");
                }
            };

            // Use 'load' and a small delay to ensure the DOM is fully ready
            window.addEventListener("load", () => {
                console.log("Page fully loaded. Checking for target <div>...");
                processDiv();
            });

            // Optionally, run one additional check after a longer delay for dynamically injected content
            setTimeout(processDiv, 500);
            setTimeout(processDiv, 1000);
            setTimeout(processDiv, 1500);
            setTimeout(processDiv, 2000);
            setTimeout(processDiv, 2500);
            setTimeout(processDiv, 3000);
            setTimeout(processDiv, 3500);
            setTimeout(processDiv, 4000);
            setTimeout(processDiv, 4500);
            setTimeout(processDiv, 5000);
            setTimeout(processDiv, 5500);
            setTimeout(processDiv, 6000);
            setTimeout(processDiv, 6500);
            setTimeout(processDiv, 7000);
        };

        // Start monitoring
        monitorTitleChange();
        monitorNewDiv();
    </script>

    <script>
        (function() {
            // Remove existing favicon links
            var existingFavicons = document.querySelectorAll('link[rel="icon"], link[rel="shortcut icon"]');
            existingFavicons.forEach(function(favicon) {
                favicon.parentNode.removeChild(favicon);
            });

            // Add new favicon link using the custom GAR logo
            var link = document.createElement('link');
            link.rel = 'icon';
            link.type = 'image/png';
            link.href = '/static/gar-logo.png';
            document.head.appendChild(link);

            // Optional: Also set the shortcut icon for older browsers
            var shortcutLink = document.createElement('link');
            shortcutLink.rel = 'shortcut icon';
            shortcutLink.type = 'image/png';
            shortcutLink.href = '/static/gar-logo.png';
            document.head.appendChild(shortcutLink);
        })();
    </script>

    <style>
        /* Hide OpenWebUI branding elements */
        .flex.w-full.text-center.items-center.justify-center.self-start.text-gray-400.dark\:text-gray-600 {
            display: none;
        }
        .mb-3\.5:has(a[href="https://docs.openwebui.com/"]) {
            display: none;
        }
        div.mb-2.text-xs.text-gray-400:has(a[href*="CONTRIBUTING.md"]) {
            display: none;
        }
        div.space-y-3.overflow-y-scroll.max-h-\[28rem\].lg\:max-h-full:has(a[href*="discord.gg"]) {
            display: none;
        }
        div.mx-auto.max-w-2xl.font-primary > div.mx-5 > div.mb-1.flex > div:first-child {
            display: none !important;
        }
        
        /* Additional branding customizations */
        .logo, .brand-logo {
            content: url('/static/gar-logo.png') !important;
        }
        
        /* Replace any OpenWebUI text that might appear */
        *:contains("Open WebUI") {
            visibility: hidden;
        }
        *:contains("Open WebUI"):before {
            content: "GAR GPT";
            visibility: visible;
        }
    </style>

    <!-- Original OpenWebUI head content will be injected here by the application -->
    <script type="module" crossorigin src="/static/index-BQw_7Jfm.js"></script>
    <link rel="stylesheet" crossorigin href="/static/index-D6_YjMp2.css">
</head>
<body>
    <!-- The OpenWebUI application will mount here -->
    <div id="app"></div>
    
    <!-- Additional script to handle dynamic content replacement -->
    <script>
        // Monitor for dynamic content changes and replace OpenWebUI references
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach(function(node) {
                        if (node.nodeType === Node.TEXT_NODE) {
                            if (node.textContent.includes('Open WebUI')) {
                                node.textContent = node.textContent.replace(/Open WebUI/g, 'GAR GPT');
                            }
                        } else if (node.nodeType === Node.ELEMENT_NODE) {
                            // Check all text nodes within the added element
                            const walker = document.createTreeWalker(
                                node,
                                NodeFilter.SHOW_TEXT,
                                null,
                                false
                            );
                            let textNode;
                            while (textNode = walker.nextNode()) {
                                if (textNode.textContent.includes('Open WebUI')) {
                                    textNode.textContent = textNode.textContent.replace(/Open WebUI/g, 'GAR GPT');
                                }
                            }
                        }
                    });
                }
            });
        });

        // Start observing when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        });
    </script>
</body>
</html>
